(()=>{"use strict";var e={765:function(e,t,n){var o=this&&this.__createBinding||(Object.create?function(e,t,n,o){void 0===o&&(o=n);var r=Object.getOwnPropertyDescriptor(t,n);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,o,r)}:function(e,t,n,o){void 0===o&&(o=n),e[o]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&o(t,e,n);return r(t,e),t},c=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.initConfig=t.reloadConfig=void 0;const d=i(n(496)),a=c(n(599)),u=c(n(659));function l(e=null){const t=d.workspace.getConfiguration("base85"),n=t.get("splitWidth"),o=t.get("addPrefixes"),r=t.get("encodeMode"),i=t.get("menuEncoder"),c=t.get("menuDecoder");if(void 0!==n&&n!==a.default.splitWidth&&(a.default.splitWidth=n),void 0!==o&&o!==a.default.addPf&&(a.default.addPf=o),void 0!==r){let e=3;"ascii85 (classic)"===r?e=1:"vwx (ascii85 + vwx)"===r&&(e=2),e!==a.default.defaultEncodeMode&&(a.default.defaultEncodeMode=e,a.default.init(e))}void 0!==i&&i!==u.default.menuEncoderEnabled&&(u.default.menuEncoderEnabled=i),void 0!==c&&c!==u.default.menuDecoderEnabled&&(u.default.menuDecoderEnabled=c)}t.reloadConfig=l,t.initConfig=function(){l(),d.workspace.onDidChangeConfiguration((e=>{e.affectsConfiguration("base85")&&l(e)}))}},112:function(e,t,n){var o=this&&this.__createBinding||(Object.create?function(e,t,n,o){void 0===o&&(o=n);var r=Object.getOwnPropertyDescriptor(t,n);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,o,r)}:function(e,t,n,o){void 0===o&&(o=n),e[o]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&o(t,e,n);return r(t,e),t},c=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))((function(r,i){function c(e){try{a(o.next(e))}catch(e){i(e)}}function d(e){try{a(o.throw(e))}catch(e){i(e)}}function a(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(c,d)}a((o=o.apply(e,t||[])).next())}))},d=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Base64ToHex=t.textFromVC85=t.SELECTIONfromVC85=t.textToVC85=t.SELECTIONtoVC85=t.deactivate=t.activate=void 0;const a=i(n(496)),u=d(n(599)),l=i(n(765)),s=d(n(659));function f(e,t=""){return()=>c(this,void 0,void 0,(function*(){const n=a.window.activeTextEditor;if(!n)return;const{document:o,selections:r}=n,i=[];for(const e of r){const t=o.getText(e);t&&i.push(t)}let c=i.join("\n"),d=c.length<1;if(o.isDirty,d){if(!t)return void a.window.showWarningMessage("No text selected!");c=o.getText()}const u=e(c);if(u)if(t){const e=yield a.workspace.openTextDocument({content:u,language:t});a.window.showTextDocument(e)}else n.edit((e=>{e.replace(n.selection,u)})).then((()=>{s.default.onSelectionChangeByEditor(n)}))}))}function h(e){return g(e)}function g(e){try{return u.default.encode(e)}catch(e){a.window.showErrorMessage(`Failed encode to vc85: ${e.message}`)}return null}function p(e){return m(e)}function m(e){try{return u.default.init(3),u.default.decode(e)}catch(e){a.window.showErrorMessage(`Failed decode from vc85: ${e.message}`)}return null}t.activate=function(e){l.initConfig(),e.subscriptions.push(a.commands.registerCommand("base85.encode",f(h))),e.subscriptions.push(a.commands.registerCommand("base85.decode",f(p))),a.window.onDidChangeTextEditorSelection(s.default.onSelectionChange)},t.deactivate=function(){},t.SELECTIONtoVC85=h,t.textToVC85=g,t.SELECTIONfromVC85=p,t.textFromVC85=m,t.Base64ToHex=function(e){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let n="";for(let o=0;o<e.length;o+=4){const r=t.indexOf(e[o])<<18|t.indexOf(e[o+1])<<12|t.indexOf(e[o+2])<<6|t.indexOf(e[o+3]),i="="===e[o+2]?2:"="===e[o+3]?4:6;for(let e=0;e<i;e++)n+=(r>>20-4*e&15).toString(16)}return n}},659:function(e,t,n){var o=this&&this.__createBinding||(Object.create?function(e,t,n,o){void 0===o&&(o=n);var r=Object.getOwnPropertyDescriptor(t,n);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,o,r)}:function(e,t,n,o){void 0===o&&(o=n),e[o]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&o(t,e,n);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0});const c=i(n(496));class d{static onSelectionChange(e){return d.onSelectionChangeByEditor(e.textEditor)}static onSelectionChangeByEditor(e){const{document:t,selection:n}=e,o=t.languageId;d.docIsB85=".b85"===o;let r=d.docIsB85,i=!0;const a=t.getText(n);if(a){let e=a.length,t="";const n=" \t\n\r";for(;e&&(t=a[e-1],!(n.indexOf(t)<0));)e--;let o=0;for(;o<e&&!(n.indexOf(a[o])<0);)o++,e--;if(e>1)if("by Context"===d.menuDecoderEnabled||"on <~...~>"===d.menuDecoderEnabled){let c=a.charAt(o);if(t===c&&"`'\"".indexOf(c)>=0&&(o++,c=a.charAt(o),t=a.charAt(o+e-1),e--),a.indexOf("~",o)===o+1&&"<"===c)r=!0,i=!1;else if("on <~...~>"===d.menuDecoderEnabled)r=!1;else{let i=a.indexOf("\n",o);for(i>o&&i<o+e&&(e=i-o);e&&(t=a[o+e-1],!(n.indexOf(t)<0));)e--;e>1&&(r=/^[!-zЯЖДПЦЩщжфцЭяюдБГэъЪФИЮШшлйЛ\\s\\r\\n]*$/u.test(a.substring(o,o+e)))}}else r="Always"===d.menuDecoderEnabled}r!==d.menuCanDecode&&(d.menuCanDecode=r,c.commands.executeCommand("setContext","base85.canDecode",d.menuCanDecode).then((()=>d.menuCanDecode))),d.menuEncoderEnabled||(i=!1),i!==d.menuCanEncode&&(d.menuCanEncode=i,c.commands.executeCommand("setContext","base85.canEncode",d.menuCanEncode).then((()=>d.menuCanEncode)))}}d.menuEncoderEnabled=!0,d.menuDecoderEnabled="by Context",d.docIsB85=!1,d.menuCanDecode=!1,d.menuCanEncode=!1,t.default=d},599:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0});class n{constructor(e=null,t=null,o=null){"number"==typeof e&&n.init(e),"number"==typeof t&&(n.splitWidth=Math.floor(t)),null!==o&&(n.addPf=!!o)}static init(e=0){if(e||(e=n.defaultEncodeMode),n.currentEncodeMode===e)return;let t=118;for(let o=0;o<85;o++){let r=33+o;if(n.vc85dec[r]=o,34===r||39===r||92===r){const i=t++;n.vc85dec[i]=o,e>1&&(r=i)}n.vc85enc[o]=String.fromCharCode(r)}["!Я","#Ж","$Д","%П","&Ц","(Щ",")щ","*ж","+ф",",ц","-Э",".я","/ю",":д",";Б","<Г","=э",">ъ","?Ъ","@Ф","IИ","OЮ","[Ш","]ш","^л","`й","lЛ"].forEach((t=>{const o=t.charCodeAt(0),r=t.charCodeAt(t.length-1),i=o-33;e>2&&(n.vc85enc[i]=t.substring(1)),n.vc85dec[r]=i,r>1088?n.vc85dec[r-960]=i:r>1024&&(n.vc85dec[r-896]=i)})),n.currentEncodeMode=e}static encode(e){const t=new Uint8Array((new TextEncoder).encode(e));return n.encodeUint8Arr(t)}static encodeUint8Arr(e){n.currentEncodeMode||n.init();const t=e.length,o=t%4,r=o?4-o:0,i=r?new Uint8Array(t+r):e;r&&i.set(e);const c=new DataView(i.buffer),d=n.addPf?["<~"]:[],a=[52200625,614125,7225,85,1],u=n.vc85enc;for(let e=0;e<t;e+=4){let t=c.getUint32(e,!1),n="";a.forEach((e=>{const o=t%e;n+=u[Math.floor(t/e)],t=o})),d.push(n)}if(r){const e=d.length-1;d[e]=d[e].substring(0,5-r)}return n.addPf&&d.push("~>"),n.splitWidth>0?n.implodeSplitter(d):d.join("")}static implodeSplitter(e){const t=e.join("").match(new RegExp(`.{1,${n.splitWidth}}`,"g"))||[];return">"===t[t.length-1]&&(t[t.length-2]+=">",t[t.length-1]=""),"<"===t[0]&&(t[0]="<~",t[1]=""),t.join("\n")}static decodeToUint8Arr(e){n.currentEncodeMode||n.init();let t=e.indexOf("<~");t=t<0?0:t+2;const o=e.indexOf("~>",t);let r=o>0?e.substring(t,o):e.substring(t);r=r.replace(/\s/g,"").replace(/z/g,"!!!!!").replace(/y/g,"+<VdL");const i=r.length%5,c=i?5-i:0,d=r+n.vc85enc[84].repeat(c),a=[];return d.match(/.{1,5}/g).forEach((e=>{let t=0;e.split("").forEach((e=>{const o=e.charCodeAt(0);t=85*t+(void 0!==n.vc85dec[o]?n.vc85dec[o]:0)}));for(let e=3;e>=0;e--)a.push(t>>8*e&255)})),i?new Uint8Array(a.slice(0,-c)):new Uint8Array(a)}static decode(e){let t=n.decodeToUint8Arr(e);return new TextDecoder("utf-8").decode(t)}}n.vc85enc=[],n.vc85dec={},n.currentEncodeMode=0,n.defaultEncodeMode=2,n.splitWidth=75,n.addPf=!0,t.default=n},496:e=>{e.exports=require("vscode")}},t={},n=function n(o){var r=t[o];if(void 0!==r)return r.exports;var i=t[o]={exports:{}};return e[o].call(i.exports,i,i.exports,n),i.exports}(112),o=exports;for(var r in n)o[r]=n[r];n.__esModule&&Object.defineProperty(o,"__esModule",{value:!0})})();
//# sourceMappingURL=extension.js.map